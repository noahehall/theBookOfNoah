# https://developers.google.com/web/fundamentals/getting-started/primers/promises

# Need to file

- never dev on the local file system when requiring access to external resources as sometimes they wont load

# Roadmap

1. google web fundamentals
2. topics
3. es6 and ES7
4. html
5. css
6. [yslow](http://yslow.org/)
7. [timeline tool](https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/timeline-tool)
8. [web font performance](https://www.igvita.com/2014/01/31/optimizing-web-font-rendering-performance/)
9. [server configs](https://github.com/h5bp/server-configs)
10. [cache control](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control)
11. [master dev tools](http://discover-devtools.codeschool.com/)
12. [build better mobile user experience](https://www.thinkwithgoogle.com/topics/create-better-mobile-user-experience.html)
13. [web workers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers)
14. [progress & activity](https://material.io/guidelines/components/progress-activity.html)
15. [BEM: Block Element Modifier](https://en.bem.info/)
16. [style invalidation in blink](https://docs.google.com/document/d/1vEW86DaeVs4uQzNFI5R-_xS9TcS1Cs_EUsHRSgCHGu8/edit)
17. [flip principle](https://aerotwist.com/blog/flip-your-animations/)
18. [es6 in depth articles](https://hacks.mozilla.org/2015/06/es6-in-depth-collections/)

## other things to touch

- [service workers](https://jakearchibald.github.io/isserviceworkerready/index.html)
- [image src-set for responsiveness](https://css-tricks.com/responsive-images-youre-just-changing-resolutions-use-srcset/)
- https://jakearchibald.com/2013/progressive-enhancement-is-faster/
- [streams](https://jakearchibald.com/2016/streams-ftw/#streams-the-fetch-api)
- [web components in polymer](https://www.polymer-project.org/1.0/blog/es6)
- [font face observer](https://github.com/bramstein/fontfaceobserver)
- [web font loader](https://github.com/typekit/webfontloader)
- [font optimization](https://www.zachleat.com/web/web-font-data-uris/)
- [real user monitoring: RUM](https://en.wikipedia.org/wiki/Real_user_monitoring)
- [lighthouse](https://developers.google.com/web/tools/lighthouse/)
- [create react app1](https://github.com/facebookincubator/create-react-app)
- [create react app scripts](https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#deployment)

# NEXT UP

- https://medium.freecodecamp.com/ivy-league-free-online-courses-a0d7ae675869#.dzefyfnlg
- https://developer.mozilla.org/en-US/docs/Web/API/ValidityState
- https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms_in_HTML#Constraint_Validation_API
- https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms/My_first_HTML_form
- https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms/Sending_and_retrieving_form_data
- [push notifications](https://developers.google.com/web/updates/2015/03/push-notifications-on-the-open-web)
- [run through all articles](https://developers.google.com/web/updates/2017)
- [custom site search view google](https://cse.google.com/cse/)
- [remote debugging](https://jakearchibald.github.io/isserviceworkerready/index.html)
- [javascript engine](https://www.quora.com/How-does-a-JavaScript-engine-work)
- [how browsers work](http://taligarsiel.com/Projects/howbrowserswork1.htm)

# need to research

- feature detection: `if(document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Extensibility','1.1'))`
- buffers
- font loading api
- [latency vs bandwidth](https://www.igvita.com/2012/07/19/latency-the-new-web-performance-bottleneck/)
- react debounce input handler

# tools

- [google mobile friendly test](https://search.google.com/search-console/mobile-friendly)
- [mozilla SSL configuration](https://mozilla.github.io/server-side-tls/ssl-config-generator/)
- [github pages](https://pages.github.com/)
- [manage all service workers](chrome://inspect/#service-workers)
- [page speed insights](https://developers.google.com/speed/pagespeed/insights/)
- [apache/nginx pagespeed optimize tool](https://developers.google.com/speed/pagespeed/module/)
- [css triggers](https://csstriggers.com/)
- [JIT in action](http://mrale.ph/irhydra/2/)
- [FastDOM](https://github.com/wilsonpage/fastdom)
- github pages vs surg.sh
  - gh-pages plugin: This will allow us to publish to the gh-pages branch on GitHub straight from within the terminal:
- [android emulator](https://developer.android.com/studio/run/emulator.html#netspeed)
- [webpage speed test](https://developers.google.com/web/fundamentals/performance/poor-connectivity/)
- [free web debugging proxy](http://www.telerik.com/fiddler)
- [augmented traffic control](http://facebook.github.io/augmented-traffic-control/)
- [javascript AST visualizer](http://resources.jointjs.com/demos/javascript-ast)

# NEED to finish

- https://classroom.udacity.com/nanodegrees/nd802/parts/8021345403/modules/550593026975460/lessons/5972243496/concepts/61045985370923
- MUST freakin DO
  - https://developers.google.com/web/fundamentals/
  - https://codelabs.developers.google.com/?cat=Web
- need to research

  - web workers
  - [watchman](https://facebook.github.io/watchman/docs/install.html
    https://developers.google.com/web/)

  - around the web:
    - [Google Developer Training](https://developers.google.com/training/)
    - [SEO](https://developers.google.com/webmasters/googleforwebmasters/)
    - https://blog.minio.io/microstorage-for-microservices-70231db026a8#.7h6uid196
    - http://blog.webkid.io/react-ui-libraries/
    - https://www.youtube.com/watch?v=O1YP8QP9gLA&feature=youtu.be
    - https://www.youtube.com/watch?v=Yy7gFgETp0o
    - https://www.youtube.com/watch?utm_campaign=Fullstack%2BReact&utm_medium=email&utm_source=Fullstack_React_37&v=aV1271hd9ew
    - https://github.com/acdlite/recompose
    - https://hashnode.com/post/the-one-thing-that-no-one-properly-explains-about-react-why-virtual-dom-cisczhfj41bmssp53mvfwmgrq?utm_campaign=Fullstack+React
    - https://en.wikipedia.org/wiki/Comet_(programming)#Hidden_IFrame3
    - http://jankfree.org/
  - project 5

    - https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/
    - https://developers.google.com/web/tools/lighthouse/
    - https://jakearchibald.com/2014/offline-cookbook/
    - https://developers.google.com/web/progressive-web-apps/
    - https://github.com/GoogleChrome/lighthouse
    - http://node-machine.org/machinepacks

  - project 3
    - http://webaim.org/standards/wcag/checklist
    - https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex
    - https://www.w3.org/TR/html5/editing.html#sequential-focus-navigation-and-the-tabindex-attribute
    - https://developers.google.com/web/updates/2016/03/focus-start-point?hl=en
    - http://webaim.org/techniques/skipnav/
    - https://developers.google.com/web/updates/2016/03/focus-start-point?hl=en
    - https://www.w3.org/TR/wai-aria-practices-1.1/
    - https://www.w3.org/TR/wai-aria-practices/
    - https://chrome.google.com/webstore/detail/chromevox/kgejglhpjiefppelpmljglcjbhoiplfn/related?hl=en
    - https://www.w3.org/TR/wai-aria-1.1/#terms
    - https://www.w3.org/TR/wai-aria-1.1/#namefromcontent
    - https://www.w3.org/TR/wai-aria-1.1/#abstract_roles
    - https://www.w3.org/TR/wai-aria-1.1/#widget_roles
    - https://www.w3.org/TR/wai-aria-1.1/#document_structure_roles
    - https://www.w3.org/TR/wai-aria-1.1/#landmark_roles
    - https://www.w3.org/TR/wai-aria-1.1/#live_region_roles
    - https://www.w3.org/TR/wai-aria-1.1/#role_definitions
    - https://www.w3.org/TR/wai-aria-practices-1.1/
    - https://www.w3.org/TR/html-aria/
    - https://www.w3.org/TR/wai-aria-1.1/#attrs_relationships
    - https://www.w3.org/TR/wai-aria/states_and_properties#attrs_relationships
    - https://www.w3.org/TR/wai-aria/states_and_properties#state_prop_def
    - http://webaim.org/techniques/css/invisiblecontent/
    - http://heydonworks.com/practical_aria_examples/
    - https://developers.google.com/web/fundamentals/accessibility/semantics-builtin/the-accessibility-tree
    - https://material.google.com/usability/accessibility.html
    - http://webaim.org/resources/contrastchecker/
    - http://wave.webaim.org/
    - https://chrome.google.com/webstore/detail/nocoffee/jjeeggmbnhckmgdhmgdckeigabjfbddl/related?hl=en-US
    - https://chrome.google.com/webstore/detail/high-contrast/djcfdncoelnlbldjfhinnjlhdjlikmph/related?hl=en
    - https://chrome.google.com/webstore/detail/wave-evaluation-tool/jbbplnpkjmmeebjpijfedlgcdilocofh
    - https://chrome.google.com/webstore/detail/accessibility-developer-t/fpkknkljclfencbdbgkenhalefipecmb?hl=en
    - http://a11yproject.com/patterns/
    - https://codepen.io/chrisdpratt/pen/dmyne
  - project 2
    - https://www.html5rocks.com/en/tutorials/es6/promises/
    - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise
    - https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState
    - https://ponyfoo.com/articles/es6
    - http://jsforallof.us/2015/02/12/utilising-node-and-npm-for-front-end-development-workflow/
    - https://bocoup.com/weblog/a-facade-for-tooling-with-npm-scripts
    - https://developers.google.com/web/tools/chrome-devtools/network-performance/network-conditions?hl=en
    - https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequests
    - https://promisesaplus.com/
    - https://github.com/petkaantonov/bluebird
    - https://developers.google.com/web/fundamentals/getting-started/primers/service-workers
    - https://davidwalsh.name/fetch
    - https://davidwalsh.name/javascript-battery-api
    - https://davidwalsh.name/battery-api
    - https://developers.google.com/web/updates/2015/03/introduction-to-fetch
    - https://github.com/github/fetch
    - https://jakearchibald.com/2014/resolve-not-opposite-of-reject/
    - https://davidwalsh.name/promises
    - https://github.com/HubSpot/tether
    - https://reactstrap.github.io/
    - https://github.com/brillout/awesome-react-components#ui-frameworks
    - http://amazeui.org/react/
    - https://ant.design/
    - http://nikgraf.github.io/belle/#/?_k=4ljm7x
    - https://grommet.github.io/
    - http://elemental-ui.com/
    - https://material.uplabs.com/
    - http://www.material-ui.com/#/get-started/usage
    - https://react.foundation/
    - https://jakearchibald.github.io/isserviceworkerready/
    - https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers
    - https://developer.mozilla.org/en-US/docs/Web/API/Request
    - https://developer.mozilla.org/en-US/docs/Web/API/response
    - https://serviceworke.rs/
    - https://dexecure.com/
    - https://blog.dexecure.com/beyond-offline-other-interesting-use-cases-for-service-workers-2/
    - https://developer.mozilla.org/en-US/docs/Web/API
    - https://developer.mozilla.org/en-US/docs/Web/API/Cache
    - https://developers.google.com/web/tools/chrome-devtools/manage-data/local-storage
    - https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API#gloss_object_store
    - https://css-tricks.com/responsive-images-youre-just-changing-resolutions-use-srcset/
  - project 1
    - https://www.html5rocks.com/en/tutorials/forms/constraintvalidation/
    - http://www.html5rocks.com/en/tutorials/geolocation/trip_meter/
    - https://developers.google.com/web/updates/2015/06/checkout-faster-with-autofill?hl=en
    - http://mlitzinger.com/blog/password-validator-js/
    - https://css-tricks.com/html5-progress-element/

- completed
  - project 1
    - https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-type
    - https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist
    - https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label
    - https://www.tjvantoll.com/2013/04/15/list-of-pseudo-elements-to-style-form-controls/#input_date
    - http://www.wufoo.com/html5/

# TIPS, TRICKS, BEST PRACTICES

## Best Practices

- generally a good practice to have some throttling when testing sites. It'll help you see your sites performance from your users perspectives.
- wrap next level JS in feature detection logic 'for' progressive enhancment `if (this.next.level.shit) run it`
- javascript doesnt have private methods, but methods that should be private should be indicated with an underscore in the name if they are only called by a specific object
- OFFLINE FIRST (all child of window less otherwise stated)
  - online first: we try the network first, if it doesnt, we show some fallback content (or 404 page)
  - offline first:
    1. full content: deliver page header + content from cache, then update via network request
       .update cache on SW install
       .strategy for unobtrusive app updates
       .get the user onto latest version
       .continually update cache of posts
       .selectively cache everything you want available offline (e.g. images, posts, etc.)
    2. header first: deliver page header from cache, attempt to retrieve content via network request, then fall back to cached content on device
  - anything in this file stemming from window... (e.g. document, navigator, etc.) is happening in a page/document
  - cache photos/media instead of storing them in db.
    db: read data > convert to blob > store it. loses streaming capabilities
    cache: request data > streams back > and can display it as it arrives (i.e. piece by piece)
- browser requests
  1. request > http cache (found?) return page
  2. else > go to internet > retrieve html>
  3. other stuff needed ? > request css & javascript
- Search Fields
  1. auto-completing queries, correct misspellings, suggest related queries
  2. place filters above search results and always display # of results
- Ecommerce
  1. allow users to purchase as guests

## TRICKS

- check if someVar is an Array (or anything, e.g. Number, or Object)
  `if(someVar && Array === someVar.constructor)``
  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/constructor
- check if variable exists
  `if (bar !== null) && ((typeof bar === "object") || (typeof bar === "function")));`
- specifically check for null
  `if(variable === null && typeof variable === "object")`
- convert function arguments to array

```js
    function () {
        https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments
          var args = Array.prototype.slice.call(arguments);
    }
```

- check if properties exists and is owned by object
  `	if (thisObject.hasOwnProperty('thisPropertyName'));`
- check if property exist and is owned by object or the objects prototype
  `(if 'thisPropertyName' in thisObject) return true;`

# TERMINOLOGY

- web sockets: a persistent connection to a server
- sourcemaps: tell the browser to convert line and column offsets 'for' exceptions thrown in the bundle file back into the offsets and filenames of the original sources.
- transpilation: ES6 > Babel > ES5
- metaprogrammaning: all about the underlying mechanics of the language, rather than “high level” data modelling or business logic. If programming can be described as “making programs”, meta-programming could be described as “making programs making programs”
  - Code Generation, aka eval & friends -
  - Reflection - finding out about and adjusting the structure and semantics of your application
    - Functions:
      - Function#name
      - Function#length
      - Function#bind
      - Function#call
      - Function#apply.
    - Object.getOwnProperties (As an aside,
  - Introspection: Reflection tools that don’t alter code, but instead gather information about it are often called

## AJAX: XMLHttpRequest, Fetch

## WebComponents `@see _html.md`

## Streams/WebSockets

## Tooling

## Analytics

## Front end security

### man in the middle

### cross site scripting

### [cross origin resource sharing](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS)

- A resource makes a cross-origin HTTP request when it requests a resource from a different domain, or port than the one which the first resource itself serves.
- the CORS mechanism gves web servers cross-domain access controls, which enable secure cross-domain transfers
  - the [CORS protocol](https://fetch.spec.whatwg.org/#http-cors-protocol) can enable cross-site HTTP requests for:
    1. invocations of XMLHttpRequest/Fetch api
    2. web fonts
    3. images/video frames drawn to canvas using drawImage
    4. stylesheets
    5. scripts
  - add HTTP headers that allow web servers to describe the set of origins that are permitted to read
  - for HTTP methods with server side-effects (e.g. `POST`), the spec mandates that browsers _preflight_ the request to retrieve supported methods with an `HTTP OPTIONS` request method, and then upon _approval_ from the server, sending the actual request
  - servers can notify clients whether crednetials (e.g. cookies) should be sent with requests
- TERMINOLOGY
  1. Simple requests: requests types that don't trigger a `CORS preflight`, i.e. GET, HEAD, POST
- server perspective
  1. set _response.header_ `Access-Control-Allow-Origin:` to the domains that can access the server's resources
  - allow all: `Access-Control-Allow-Origin: *`
  - allow specific: `Access-Control-Allow-Origin: http://foo.example`
    - you can programmatically update this permit multiple domains access without using the `*` flag

## Ecommerce

- allow users to purchase as guests

## SEO

- Interstitials may cause a negative impact on search rankings

## Mobile Sites

### basics

- Make calls to action front end center
- Make secondary tasks available through menus/below the fold
- make common tasks easily available
- keep menus short and sweet
- fuck scrolling as much as possible
- Site search bar should be above the fold, and never in a menu
- show as much content as possible without requiring registration

## Responsive Design

## javascript engine

- https://www.quora.com/How-does-a-JavaScript-engine-work
- general steps 0. source code: the asexome sht I think i do
  1. parser: takes js and generates an abstract syntax tree
  2. bytecode generator
  3. interpretor: converts the bytecode into machine code

## Progressive Web apps

### Offline Web Apps

### Service Workers

- service worker: a script your browser runs in the background and listens for and reacts to arbitrary events
  - each page the service worker controls, it hijacks all events and allows you to operate on them.
  - are limited to HTTPS, since intercepting network requests can be super dangerous in the wrong hands
  1. cant access the DOM directly, but communicates with the pages it controls by responding to messages via the [postMessage](https://www.html5rocks.com/en/tutorials/workers/basics/) interface
  2. is a programmable network proxy, allowing you to control how network requests from your page are handled
  3. is terminated when not in use, and restarted when its nexted needed, so never rely on global state within a SW onfetch and onmessage handlers
  4. has full access to the indexedDB api
  5. make extensive use of promises
- use cases
  1. adding offline support
  2. control the cache
  3. sending push notifications
  - You could send push notifications from the browser to your users about new posts, even if the client has closed your page, since service workers are in constant communication with your server in background.
  4. doing background sync with service workers
  5. Capability reporting
  6. Client-side Load Balancer
  7. Differential update of text files
  8. Support a previous unsupported image format in your browser!
  9. Save forms information even if theres no internet at the moment: Your application could have a huge form to send information for and, in case the user lost connection, the information could be saved in a Service Worker, even when the user is offline, and be sent to your server when the connection is back.
  10. Faster page loads: You could cache scripts, images, stylesheets, static pages, etc on a Service Worker on a first page-load and run a faster page loading on subsequent requests. The approach is almost the same if you relate it with browser caching but differs with when talking about requests: browser caching requests are always made and stops only if you already have the information needed and with Service Workers caching, no requests are made to the server.
  11. for some changes (e.g. minor, or security fixes) you may want to force changes to users
  12. [push notifications](https://developers.google.com/web/updates/2015/03/push-notifications-on-the-open-web)
  13. [background sync](https://developers.google.com/web/updates/2015/12/background-sync)
- life CYCLE
  1. registration step: register a SW in your page's javascript: the browser will then install the SWin the background
  2. SW Install step: you specify which static assets to cache. if all assets are successfully downloaded and cached, the SW becomes activated
  - create/open a cache
  - cache static assets
  3. SW Activated step: handle management of old caches
  - for all pages within the SW scope, the SW will act as a Proxy or be terminated (to save memory),
  - clear current cache / delete old caches if upgrading to a new version
  - have the activated service worker take control immediately
    - this is the 'idle' phase
- process:
  1. service workers are instantiated via javascript in the window, and can only take control of pages that are LOADED after they are instantiated.
  - page 1 loads > instantiates sw registration file > makes requests (none are intercepted)
  - user refreshes (causes new load) > sw still in browser > requests are intercepted
  2. service worker intercepts all requests and triggers a 'fetch' event for each
  3. instantiating a new SW can only occur if all pages controlled by the current SW are gone. this ensures only one version of your site exists at any given time
  - the new SW is in 'waiting' mode until the current SW is gone
  - only occurs if the page closes, or the user navigates to a page not controlled by the current SW
  4. users are notified that a new SW is ready by changing the browser hamburger button in the top right (at least on chrome)
  - when the browser refetches a service worker, it goes through the browser cache for all requests
  - it is good to set your SW CACHE TIME TO ZERO!!!! this way they are updated as soon as possible
    -updates to will bypass the browser cache if the SW it has is > than the cache time

#### notes

- use indexeddb > window.cache because indexed db has far more support

#### [window.navigator.serviceWorker](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API)

- service worker hijaking workflow:
  1. client loads
  2. service workers interact with caches
  3. service workers interact with http caches
  4. service workers interact with network/internet
- network flow: browser requests > service worker > http cache > internet
- gotchas
  - browsers only update service workers on page reload, or if there is a change to the SW (e.g. change cache name)
    - the new SW will have its only install event so you can use this time to get an updated cache
- DEV TOOLS:
  1. click the down arrow next to 'top' and select your SW file
  2. now you can interact with your SW
     self.registration
  3. you can debug SW same as anything else:
     sources > click SW file > set breakpoints, etc.
  4. click the application/resources tab and select the SW option
- Basic steps:
  - registration
    1. in a script on the page, register a service worker
    2. the service worker is registered on an origin, and controls a subset of paths (or root, for all paths)
       navigator.serviceWorker.register....
  - do stuff!
    1. intercept network requests/events and do something with them (e.g. store the response in cache)
       self.addEventListener....
       caches.open...
    2. events: install, fetch,
       event.someMethod()
    3. caches.open(...)
       cache.someMethod()
- methods
  - postMessage(): send messages to/from SW
  - skipWaiting()
    - forces the waiting service worker to become the active service worker.
    - call this when a user hits the refresh button
- events
  - INSTALL: when a browser sets up a SW for the first time, the install event is fired.
  - ACTIVATE: when a new SW is finished installing and ready to control pages, use this event to delete old caches
  - FETCH: every browser request triggers a fetch, useful for hijacking/intercepting
  - MESSAGE: receive/post messages from/to the client (i.e. a page/document)

#### window.navigator.serviceWorker by MDN tutorial

- [url is here](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers)

* step 1 is to register your someWorker.js file

1. in your html file, include a registration.js file that registers specific service workers against an origin and path

   ```
     if ('serviceWorker' in navigator) {
       navigator.serviceWorker.register('/sw-test/sw.js', {scope: '/sw-test/'})
       .then(function(reg) {
         // registration worked
         console.log('Registration succeeded. Scope is ' + reg.scope);
       }).catch(function(error) {
         // registration failed
         console.log('Registration failed with ' + error);
       });
     }
   ```

#### window.navigator.serviceWorker examples

- registering service workers, returns a registration object

  ```
    in home.html
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('path/to/your/SW.js', {scope: 'some/path'})
        // https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerRegistration
        // https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/register
        .then(function(reg) {
          // an update or initial install is in progress
          if(reg.installing) {
            // https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorker
            let sw = reg.installing
              // grab this sw from the reg object
            // https://developer.mozilla.org/en-US/docs/Web/API/Client/postMessage
            sw.postMessage({...}); // send data back to service worker script
            console.log(sw.state);
              // returns installing, installed, activating, activated, redundant (thrown away)
            sw.addEventListener('statechange', function(){
              // whenever sw.state changes
              if (this.state === 'installed') //tell user to refresh browser!
            })
          } else if(reg.waiting) {
            // an update is in the pipeline and ready to be activated
            // tell the user to refresh their content! e.g. by a web socket
          }

          reg.addEventListener('updatefound', function() {
            // reg.installing is now the current worker
            reg.installing.addEventListener('statechange', function(){
              // whenever sw.state changes
              if (this.state === 'installed') //tell user to refresh browser!
            })
          })
          console.log('Registration succeeded. Scope is ' + reg.scope);
              // you can hijack requests so they are never sent to server
        }).catch(function(error) {
          // registration failed
          console.log('Registration failed with ' + error);
          });
    }
  ```

- talk to the controlling service worker
  ```
    if (navigator.serviceWorker.controller) {
      //this page was loaded with a service worker
      const Client = navigator.serviceWorker.controller;
      Client.postMessage(message); //send message  from page to service worker
    } else {
      //this page was NOT loaded with a service worker, but grabbed from the network
      //so the user already has the latest version (duh, it came from the network)
    }
  ```
- listen to events for all service workers from client
  ```
    navigator.serviceWorker.addEventListener('controllerchange', function() {
        //the controlling service worker has changed
      window.location.reload();
        //reload the page if the user has consented, if not ask for permission
        //for some changes (e.g. minor, or security fixes) you may want to force changes to users
    })
  ```
- listen to events for specific service worker in SW file
  `self.addEventListener('eventName', function(event){...}) //self === service worker`
- install event
  ```
    self.addEventListener('install', function(event) {
      event.waitUntil(somePromise);
        //retrieve files from network and create cache
        //promise resolve === accept SW continue with install
        //promise reject === reject SW and discard
    })
  ```
- fetch event
  ```
    self.addEventListener('fetch', function(event) {
      event.respondWith(responseObjectOrPromise)
        //intercept and hijack this request
        //takes a response object or a promise resolving to a response object
        //see the fetch API 'for' the response object API
        //https://developer.mozilla.org/en-US/docs/Web/API/Response
        //return plain string
        new Response('hello world');
        //return string with custom header
        new Response('hello world', {
          headers: { headerKey: 'header value', ...}
        })
        //respond with html
        new Response("<div class='a-winner-is-me'>boom</a>", {
          headers: {
            'Content-Type': 'text/html'
          }
        });
        //hijack specific type of requests
        if(/\.jpg$/.test(event.request.url)){
          event.respondWith(
            fetch('/imgs/dr-evil.gif')
          );
        }
        //respond in event of 404 or offline
        fetch(event.request).then(function(response){
          //event.request = original object
          if (response.status === 404) return new Response('404 not found');
          //alternatively above you can return a fetch('some/other/thing')
          return response; //return original response
        }).catch(function(error){
          //no connection (offline) or some other error
          return new Response('uh oh! error/offline');
        })
    })
  ```
- message event
  ```
    self.addEventListener('message', function(event) {
      // event.data === whatever sent from Client.postMessage
    })
  ```

## Browser Rendering Optimization

## Website Performance Optimization

## Client-Server Communications

### HTTP: hypertext transfer protocol:

- hypertext = text with links
- transfer protocol: rules for moving things across the web
- clients: asks (requests) servers for resources
- servers: store information and sends (response)
- REST: Representational State transfer
  - state transition: going from one state (page) to another (page)
  1. separate client from server
  2. should not hold state between requests (all information is sent with each response)
  3. use HTTP and HTTP methods
- HTTP Requests:
  1. Request: tells the server what kind of request (method) is being sent
     // POST /codecademy/learn-http HTTP/1.1
  2. Header: sends the server additional information, e.g. which client is making the request
     // Host: www.codecademy.com
     // Content-Type: text/html; charset=UTF-8
  3. body: contains the data being sent
     GET: body = empty
     POST/UPDATE/DELETE: body should not be empty
     // Name=Eric&Age=26
- [HTTP Responses](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)
  - Status Codes: three digits, the starting number defines the type
  ```
    1xx: information
    2xx: success
    3xx: redirection
    4xx: client error
    5xx: server error
    6xx: unofficial Codes
      6.1: internet information services
      6.2: nginx
      6.3: cloudfare
  ```
- [HTTP Request Methods](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods)
  1. GET: retrieve data
  2. HEAD: asks for a response identical to a GET request but without the response body
  3. POST: submit data
  4. PUT: replaces data
  5. DELETE: delete data
  6. CONNECT: establishes a tunnel to the server
  7. OPTIONS: describe the communication options
  8. TRACE: performs a message loop-back test along the path to the server
  9. PATCH: used to apply partial modifications

## Accessibility:

- Accessible: everyone can access the site's content and use it's functionality
  - for users who are experiencing some time of impairment
  - the sites' content should be available to everyone
  - the sites' functionality can be operated by anyone
  - examples: events

### Accessibility users

- visually impaired (color, near sited, far sited, braile)
  - use braile readers, text to speach, magnification (zoomed in), keyboard navigation, color contrast plugins
- hearing impaired
- motor
  - use hand/eye tracking software, voice dictation
- cognitive (understanding, memory, etc) issues
- Impairments can be:
  1. permanent
  2. temporary
  3. situational

### Accessibility technologies

- screen readers: reads the text on the screen
- braile keyboards: useful for blind people

### Accessibility environments:

- desktop
- mobile
- screen readers
- tablets

### Accessibility Best Practices

- (WCAG): [Web Content Accessibility Guidelines](https://www.w3.org/TR/WCAG20/)
  - [AIM Checklist](http://webaim.org/standards/wcag/checklist)
  - POUR Guidelines
    1. Perceivable: users can perceive content
    2. Operable: users can navigate
    3. Understandable: users can understand the content and interface and avoid confusion
    4. Robust: can a wide variety of agents consume the data
- functionality
  - keyboard navigation
  - shortcut keys
- Style and visual design:
  - text color should be high contrast with background color for readability (sight)
  - should be minimal to help with understanding the page
  - check your design patterns against aria: https://www.w3.org/TR/wai-aria-practices/
- Forms:
  - Inputs and labels should be close enough together for understanding the relation between the two
    - if they are two far apart, you cant zoom in and see the relation (site)
  - labels should activate inputs
- Audio
  - audio should be accompanied with visual actions
- [Managing focus](https://www.w3.org/TR/html5/editing.html#focus-management)
  - focus: the control on the screen that receives input from the keyboard and clipboard when you paste/type
    - determines where keyboard events go
    - not all elements are focusble by default, and will not be included in the tab order
- Managing shortcuts:
  - implement the following:
    - some environemnts enforce all keyboard commands to also use command (e.g. on mac)
    - tab order: move through focusable (i.e. interactive elements, e.g. input, select, button) and not content elements (e.g. div )
      - elements are inserted into the tab order based on their position in the DOM
      - using css tabIndex to control the tab order
        - try to always use the natural tab order
      - an exception to adding tab order to non-interactive elements is when you're managing focus:
        1. reloading parts of a page without a full page refresh, and need to indicate to user what has changed
        2. in page navigation, e.g. through #anchor links and need to inform user
    1. tab: move forward
    2. shift tab: move backward
    3. arrow keys: move within a component
    4. spacebar: select/deselect
  - skip links: allows keyboard users to skip to main content
    - `<a href='#your-main-content-id' class='skip-link'> skip to main content </a>`
      - this element should be position off screen when not focused (e.g. left: -40px;), and positioned on screen (E.g. top left corner) when focused
    - your main content should have a parent elementwith the corrosponding id
      - make sure to add tabindex='-1'
    - http://webaim.org/techniques/skipnav/
  - roving focus: perfect for radio buttons, so that keyboarding through items in the radio will loop through from beginning to end
    - set the currently checked item to tabindex=0, and all other buttons inthe group to tabindex='-1' via an event listener
  - manage offscreen / hidden content that receives focus but does not appear on screen
    - you can log window.activeElement to get the exact element that is currently focused
    - check the chrome dev tools accessibilty audit chrome plugins
    - best practices:
      1. set visibility: hidden, display: none for offscreen/hidden items so they cannot receive focus, then do the opposite when they are to be visible/on screen
  - manage keyboard/modal traps
    - when you click into a (e.g a select element) in a modal, you may be unable to tab out of it, as the tab shortcut is trying to finish your autocomplete info
    - or when you are on a modal, and the modal is open but the user tabs out of the modal and returns to the main page but the modal is still open so the page looks disabled
      - keep track of the element that had focus before the modal was opened
      - trap the focus inside the modal until closes
        - this is done by listening for tab & shit.tab events and programmatically calling focus() to elements you allow
      - return focus to the previous element
- Touch points:
  1. DOM order
  2. Managing focus
  3. Managing navigation via tabindex
  4. Keyboard shortcuts
  5. Semantics
  6. Labeling inputs
  7. Headings in sections
  8. Landmarks (html structural elements)
  9. Links
  10. ARIA roles and design patterns
  - https://www.w3.org/TR/wai-aria-1.1/#role_definitions
  - https://www.w3.org/TR/wai-aria-practices-1.1/
  - https://www.w3.org/TR/html-aria/
  11. Ensuring only appropriate sections of a document are exposed to assistive technologies, or hidden from non-assistive technologies
  - http://webaim.org/techniques/css/invisiblecontent/
  12. ensuring LIVE regions (i.e. updates) are communicated to users
  13. managing the styles and using aria-attributes instead of classes
  14. ensuring you have a responsive design for multiple devices
  15. breakdown existing acciessibility issues based on:
  16. is this a critical piece of the app functinoality?
  17. how frequently is this piece of UI/UX used?
  18. do we need to fix this?
  19. all of the above should ensure the ACCESSIBILITY TREE is as it should be

### Accessbility Semantics

#### Assistive technologies

- assistive technologies: umbrella term that helps users complete some task
  - browser zoom, braile display, voice control, screen readers, etc

#### Programmatically Expressed Semantics

- Semantics: the elements, and its attributes, is used in a way facitilitates its meanings programmaticaly to describe its functionality

  - for all user interface components:
    - the name and role can be programmatically determined
    - states, properties, and values can be programmatically set
  - screen readers convert a visual page into auditory sounds that users can enter information into

- Attributes:
  - Role: what type of element it is
    - e.g. 'Edit Text'
  - Name (i.e. label text or text alternative): if it has one
    - Text Alternatives: for elements that do not have labels, e.g. images, buttons, etc.
      - the text associated with these (e.g. in the alt= or as a text node) because its name/label
      - imagine all your images are broken, and think of what you would need in the alt= to understand what the image should be
  - Value: if it has one
  - State: if it has any
- The Accessibility tree: screen readers take the DOM and strip away its visible elements, to create an accessibility tree based on the programmatic semantics of the html elements
  - its all based on role, name, value, and state
- Navigating Content: links, form controls, headings, and landmarks
  - Link Text: should be descriptive, not just 'click here', but the text should tell you exactly where it go
    - all links should have an href
    - the href= should never be href=#
    - anchors with child images: the image must have an alt text
  - Landmarks: describe areas of a page, versus a single element
    - main: only one per page
    - header: page banner or grouping element for introductory content for a section
    - footer: a page footer or grouping element for a section of a page
    - nav: a section of a page that links to other pages, or parts within a page
    - article: self contained sections of content, e.g. blog entry, forum posts, etc.
      - will the ocntent make sense in a another context?
    - section: generic section of a document or application
      - should contain a heading
    - aside: tangentialy related to the content around it
  - Headings: are the best thing to implement for screen readers
    - HEading order: follows the DOM Order and not the visual order of the page
      - get dom order of headings:
        ```
          for (var i = 0, headings = $$('h1,h2,h3,h4,h5,h6');
               i < headings.length; i++) {
             console.log(headings[i].textContent.trim() + " " +
                         headings[i].tagName,
                         headings[i]);
          }
        ```
      - you can include headings off screen to help with screen readers, but do not go overboard
        - i.e. headings absolutely positioned off screen

#### Semantics ARIA

- ARIA is used to express semantics that native html elements cannot express on its own

* https://www.w3.org/TR/wai-aria-1.1/
* modifies how elements are translated into the accessibility tree via custom attributes
  - great when you need to use a div (instead of a checkbox) but still need that div to show up as a checkbox to assistive technologies
* ARIAs only purpose is to modify the accessibility tree, it does not:
  - modify element appearance
  - modify element behavior
  - add focusability
  - add keyboard handling
    - all of the above must be handled by javascript ;)
* ARIA breakdown:
  - role: the semantic meaning of the element
    - includes superclass, subclass, and related concepts (roles) that have similar, but not identical semantics
  - inherited states/properties: attributes that can be used with the given role, some are requied, others are optional
  - Name from: where the name (label) will be retrieved from, e.g.
    - the text content
    - or the html author
  - important attributes:
    - name:
      - aria-label: screen reader only name
      - aria-labelledby=id: specify another element that provides the name for this element
      - aria-describedby=id: additional text describing this element is provided by some other element
    - ARIA landmark roles: banner, navigation, main, complementary, search, dialog, contentinfo
    - relationships:
      - aria-owns="id1 id2 id3 idX" specify this element owns the other element(S), and should be listed as the parent of them all in the accessibility tree
        - this modifies the hierarchy of the accessibility tree
      - aria-activedescendant='idX': when the parent has focus, this element should actually be the one given focus
        - this way the parent can keep actual focus and receive keyboard events, while the idX is updated to the element that should be visually given focus
      - aria-describedby: extra explanatary text that a user may need
      - aria-posinset: 1-based position in set, e.g. x out of y. used with aria-setsize
      - aria-setsize: relationship between sibling elements in a set, used with aria-posinset
        - perfect for lazy loading, to specify the total number of items in a set, even when some of the items have not been loaded yet
      - aria-hidden: hide elements from assistive technologies
      - aria-live=off|polite|assertive: specify that updates should be communicated to users as soon as it hits the DOM
        - e.g. status updates
        - polite: alert when no other alerts are happening
        - assertive: interrupt and alert immediately
        - aria-live region should be in the initial page load
        - set it on the parent most element
        - related attributes:
          - aria-atomic: whether the entire region should be communicated to the user
          - aria-relevant=additions|removals|text|all: what should be communicated to the user
    - states
      - aria-pressed: indicated if the state of this button/interactive element is pressed|clicked
      - aria-hidden: element is hidden
      - aria-expanded: element is open

### Accessibility Styles

- importing styles:
  - style via aria attributes with attribute selectors: https://developer.mozilla.org/en-US/docs/Web/CSS/Attribute_selectors
- Focus
  - Styles: :focus, :hover, :before,
  - properties: outline, box-shadow
    radio:focus::before { some styles }
- Design
  - always use <meta name=viewport
  - always use responsive grid
- Fonts:
  - use relative units as much as possible (e.g. em, rem)
- Touches:
  - at least 48dp minimum touch size per touch target (average size of a finger)
  - at least 32dp minimum margin around touch targets (so you dont accidently touch another thing)
- color and contrast:
  - contrast ratio: body text and images have a high contrast with background color
    - http://webaim.org/resources/contrastchecker/
  - dont convey info with color and contrast alone, always provide additional help text

## Forms:

- best practices
  1. should have progress meter
  2. should be quick to finish
  3. validation messages should be clear and located next to their errors
  4. inputs should have placeholders
  5. inputs should autocomplete based on users known data
  6. always realtime validation
  - links
  - [creating amazing forms](https://developers.google.com/web/fundamentals/design-and-ui/input/?hl=en)
  - [Location Example](http://www.html5rocks.com/en/tutorials/geolocation/trip_meter/)
  - [mdn forms guide](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms)
  - [mdn sending form data](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms/Sending_and_retrieving_form_data)
- background
  - HTML Forms are one of the main points of interaction between a user and a web site or application.

### validation

    - [constraint validation](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5/Constraint_validation)
    - types of form constraints:
      1. intrinsic: basic validation provided by setting the `type=blah` attribute, e.g. email
      2. basic: setting validation related attributes
        + `pattern|min|max|required|step|maxlength`
    - triggering constraint validation process: happens either at the form level, or the input level
      1. invoke checkValidity() method on an input/select element
      2. invoke checkValidity() method on the form element ( statically validating the constraints.)
      3. submitting the form ( interactively validating the constraints.)
      4. trigger JavaScript on some form field event (like onchange) to calculate whether the constraint is violated
        - use the method `field.setCustomValidity()` to set the result of the validation:
          + empty string: constraint is satisfied
          + non empty string: there is an error and this string is the error message to display to the user.

#### [validity states](https://developer.mozilla.org/en-US/docs/Web/API/ValidityState)

- The ValidityState interface represents the validity states that an element can be in, with respect to constraint validation. Together, they help explain why an element's value fails to validate, if it's not valid.
- used like this: `someInput.validity.someProperty`

* validity properties:

### validation styling via css pseudo classes

- `:required`
- `:valid`
- `:invalid`

### Form Examples

- label with datalist
  ```
    <label>
        Choose Event Type:
        <input list="eventTypes" name="myBrowser" />
    </label>
    <datalist id='eventTypes'>
      <option value='Party'>
      <option value='Meeting'>
      <option value='Conference Talk'>
      <option value='Sports Game'>
    </datalist>
  ```

## promises and asynchronous code

- asynchronous: statements occur in multiple timelines, in an unknown order irregardless of how they are defined in code
  e.g. network requests, events, threads, timeouts, etc.
- synchronous: statements happen in order as defined, in a single timeline
- callbacks: pass one function (cb) to another function, and the cb is invoked when certain conditions are met
  - problems:
    1. how do you handle errors ? do all type of errors get handled the same way ?
    2. Pyramid of doom / callback hell:

### Promises:

- try catch wrapper around code that will finish at an unpredictable time
  1. can only succeed/fail once
  2. cannot switch from success to failure/vice versa
  3. if a promise has succeeded/failed, and you later add a success/failure callback, the correct callback will be invoked, even though the event took place earlier
  4. any object with a then method can be used as and integrated with native promises
- Promise States
  1. fulfilled (resolved): action related to the promise has succeeded
  2. rejected (failure): action related to the promise has failed
  3. pending: not yet fulfilled / rejected
  4. settled: promise has either fulfilled / rejected.
  - a promise can only be settled once, whereas events can fire multiple times
  - promises are potentially blocking since they are created and settled on the main thread
- Promise stages:
  1. wrapping: (value promise creation)
  - create a promise that wrapps an async action
  2. thening (value -> action):
  - any object that returns a .then is thenable
  - any thenable can become part of a chain of thens/asynchronous work
  3. catching (value -> recovery):
  - javascript calls the NEXT CATCH in the chain when an error occurs or a promise is rejected
  ```
    all of the below are the same
    .catch(....)
    .then(undefined, rejectFunc)
    .then(resolve, rejectFunc)
  ```
  4. chaining (value -> promise):
- Promise Methods
  1. `Promise.Resolve()`: create a promise thats resolves to whatever value you give it
  ```
    var blah = Promise.Resolve();
    blah.then(...);
  ```
  2. `Promise.Reject()`: see Promise.Resolve();
  3. `Promise.all([pro1, pro2,...])`: takes an array of promises and returns an array of values in the same order as the original promises
     ```
       Promise.all([...])
         .then(...)
     ```
     - fails fast: will reject as soon as the first promise rejects, without waiting for the remaining promises to settle
  4. `Promise.race(array)`: make a promise that is settled as soon as any promises in the passed array are resolved/rejected
- notes
  1. each Then is also asynchronous, so you can return a promise from a then, and the next then will only execute when the new promise is settled
  2. the `.catch()` chain is just sugar for `then(successFunction, errorFunction)`
  3. promise rejections skip forward to the next then() with a rejection callback or catch chain
  4. rejections happen when a promise is explicitly rejected, or implicetly if an error is thrown in the constructor callback
  - thus, its best to do all your promise-related work inside the promise constructor callback, so errors are automatically caught and become rejections
  5. you can combine generators and promises to write async code that looks like and easy to follow like sync code

#### Promise constructor:

```
  // create promise and assign to const
  const Promised = new Promise((resolve, reject) => {
    // resolve and reject are callbacks
    if (true) resolve(successData);
    else reject(ErrorObject);
    // do some other stuff
    // even if resolve is called first, finish all code inside of this block
  });

  // take action when promise is settled
  Promised.then(
    (successData) => {
      // sucessData = whatever is passed to resolve()
    }, (errorData) => {
      // errorData = whatever is passed to reject()
    }
  ).catch(rejectFunction) // handles both reject and javascript errors
  .then(someNamedFucntion) // passed a name function that accepts the argument
  .catch(...) // thens and catches *can* come right after each other
  .then(....)
  .then(undefined, rejectFunc) // this is long form of .catch(...)
  .then(resolve, reject) // combine both .then and .catch in one go
```

#### Promise Chaining

**Cast a thenable object to a standard promise**

```
  const cast = Promise.resolve({ then: () => {
    // this is my thenable object cast to a promise;
    }})
  cast.then(...)
```

**Series: multiple promises run sequentially**

```
  var sequence = Promise.resolve(); // create a promise without the new keyword, can also use Promise.reject()
  blah.forEach(function(url) {
    sequence = sequence.then(...); //each request is added to the previous request and executed in sequence
  })
```

**Parallel: multiple promises run concurrently**

```
  var sequence = Promise.resolve(); // create a promise without the new keyword, can also use Promise.reject()
  blah.forEach(function(url) {
    sequence.then(...); //each request is fired independently and in parallel
  })
```

**Each then can transform the value returned from the previous**

```
  somePromise
    .then((value) => value++)
    .then((value) => value++)
```

### Async

- links
  1. [jake archibald async explanation](https://developers.google.com/web/fundamentals/getting-started/primers/async-functions)
  - [another jake archibald](https://jakearchibald.com/2014/es7-async-functions/)
- basics
  1. allow you to write promise-based code as if it were syncrhonous, but without blocking the main thread
  2. Note that `await` may only be used in functions prepended with the `async` keyword
  3. suspends execution in your context until the promise settles
  4. `async` Function always returns a Promise
  5. anything prepended with `await` is passed through Promise.resolve() so you can safely await non-native promises
- use cases
  1. reduce complex promise logic
  2. convert object/class methods to promises
  - Class constructors and getters/settings cannot be async.
  3. easily run multiple async logic in serial/parallel
  4. easily make requests in parallel but take action in order they were called
  5. use them on every promise-returning function! Not only do they make your code tider, but it makes sure that function will always return a promise.

#### examples

**async arrow function**
`     async ()=> {
        var data = await makeCall();
      }
  `
**async function with try catch**
`     async function myFirstAsyncFunction() {
        try {
          // execution is suspended in a non-blocking way inside of this block until the promise is resolved or rejected,
          const fulfilledValue = await promise;
        }
        catch (rejectedValue) {
          // …
        }
      }
  `
**async function used with array map**
`     const jsonPromises = urls.map(async url => {
        const response = await fetch(url);
        return response.json();
      });
  `
**async function as a object method**

````
      const storage = {
        async getAvatar(name) {
          const cache = await caches.open('avatars');
          return cache.match(`/avatars/${name}.jpg`);
}
};

      storage.getAvatar('jaffathecake').then(…);
    ```

**async function as a class method**
````

      class Storage {
        constructor() {
          this.cachePromise = caches.open('avatars');
        }
        async getAvatar(name) {
          const cache = await this.cachePromise;
          return cache.match(`/avatars/${name}.jpg`);

}
}

      const storage = new Storage();
      storage.getAvatar('jaffathecake').then(…);
    ```

**A function with multiple await expressions will run each in serial.**
`     async ()=> {
        var data = await makeCall();
        var data2 = await makeCall2();
        var data3 = awat makeCall3();
      }
  `
**async function ran in parallel**
`     async function parallel() {
        const wait1 = wait(500);
        const wait2 = wait(500);
        await wait1;
        await wait2;
        return "done!";
      }
  `
**request in parallel, process in order**

```
  async function logInOrder(urls) {
    // fetch all the URLs in parallel
    const textPromises = urls.map(async url => {
      const response = await fetch(url);
      return response.text();
    });

    // log them in sequence
    for (const textPromise of textPromises) {
      console.log(await textPromise);
    }
  }
```

**to run a bunch of calls at the same time**
`     async function concurrent () {
        var [r1, r2, r3] = await Promise.all([p1, p2, p3]);
      }
  `
**another version of the above**
`     const all = Promise.all.bind(Promise);
      async function concurrent () {
        var [r1, r2, r3] = await all([p1, p2, p3]);
      }
  `

## Javascript language

- is single threaded: two things cannot run at the same time
  1. Javascript is in the same queue as painting, updating styles, and handling user actions (e.g. highliting text/interacting with form controls)

## [EVENTS](https://developer.mozilla.org/en-US/docs/Web/Events)

- Event Registration: telling javascript you want to react to specific events when they happen via an event handler
  1. using tag attributes
     `onclick="alert('show this message on click')"`
  2. using dot notation
     `document.getElementById('blah').onclick=function(){alert('show this message on click');}`
  3. using addEventListener()
  - it allows us to check for multiple events in a single call (aka event propagation)
  - and events can be triggered via non DOM objects (i.e. write your own events)
  - it is not supported by IE 8 or lower (you have to use an if statement to check for the other one)
- event.preventDefault(): stops the browser from continuing to process the event, it does not stop propagation
- event.stopPropoagation(): prevents further propagation of the event in the capturing and bubbling phases
- Event objects
  - capturing an event returns an event object
  - event objects will be different in each browser, console log it to see:
  - event info
    1. type = e.g. click
    2. timestamp = the time it happened
    3. defaultPrevented = if you are preventing the default behavior
  - event targeting info
    1. currentTarget = the element the event was assigned to
    2. target = the element the event originated from
    3. srcElement = the actuall element that fired the event
    4. fromElement = mouse over and mouse out events
    5. toElement = mouse over and mouse event events
  - coordinate info:
    1. screen X,Y: position relative to the users screen
    2. layer x, y: position relative to the another positioned event
    3. client x,y: position relative to the window
    4. page x,y: position relative to the document
    5. offset x,y: position relative to the element that fired the event
  - key/mouse info
    1. charCode/Keycode: which character was pressed
    2. altKey:
    3. shiftKey:
    4. ctrlKey:
    5. button:
  - Event propagation
    - a parent event can capture events from is child elements
    - only available when using addEventListener
  - capturing phase: moves down from parent to child element
  - bubbling phase: moves up from child to parent element
  - stopping propoagation
    `e.stopPropoagation()``
    - stop the event from moving up/down the DOM
    - use this after you're done with the event
  - Event Default behavior
  - clicking on links, submitting forms, etc.
    `e.preventDefault() //stops the default behavior`

### [ADD EVENT LISTENERS](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)

```add events
  target.addEventListener(type, listener[, options]);
  target.addEventListener(type, listener[, useCapture]);
  target.addEventListener(type, listener[, useCapture, wantsUntrusted  ]); // Gecko/Mozilla only
      - target = domnode|document|window
      - type = event
      - listener = js function|callback, gets passed the event object as its only argument
      - type: string; event type
      event types:
      - listener: an object that receives a notition that implements the event interface or is some other capable javascript function
      - options: object that specifies characteristis about the event listener containing properties capture, once, passive, and mozSystemGroup
```

### [REMOVE EVENT LISTENERS](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener)

### [TOUCH EVENTS](https://developer.mozilla.org/en-US/docs/Web/API/Touch_events)

    - background
    	+ low level APIs to support application specific touch interactions like two finger gestures
    	+ are similar to mouse events except they support simultaneous touches and at different locations on the touch surface
    	+the TouchEvent interface encapsulates all of the touch points that are currently active
    - events: touchstart, touchmove, touchend, touchcancel, tou

- tips
  - setup event handlers on the body.onload attribute and attach event handlers to all elements that require it
  - calling evt.preventDefault() on touchstart / first touchmove will cancel mouse events
    - instead only call preventDefault() on touchmove, or fire touch events as mouse events
- Use the event object to tailor actions to events.
  - Each touch event includes three lists of touches.
    1. touches: a list of all fingers currently on the screen.
    2. targetTouches: a list of fingers on the current DOM element.
    3. changedTouches: a list of fingers involved in the current event. For example, in a touchend event, this will be the finger that was removed.
  - These lists consist of objects that contain touch information:
    1. identifier: a number that uniquely identifies the current finger in the touch session.
    2. target: the DOM element that was the target of the action.
    3. client/page/screen coordinates: where on the screen the action happened.
    4. radius coordinates and rotationAngle: describe the ellipse that approximates finger shape.
- some mobile browsers will select text if a user long touches on the screen, which can be super annoying, disable by:
  - moz-user-select: none;
  - webkit-user-select: none;
  - ms-user-select: none;
  - user-select: none;

## Classes & [Mixins](http://justinfagnani.com/2015/12/21/real-mixins-with-javascript-classes/)

- is really a subclass factory, parameterized by the superclass, which produces mixin applications

### Mixin examples

- benefits of approach below: 0. the only difference between a mixin and a normal subclass is that a normal class has a fixed superclass, while a mixin definition doesnt (the mixin application does)
  1. the definition of a class that may be applieed to different super classes.
  2. mixin application: the application of a mixin definition to a specific superclass, producing a new subclass
- implementation features based on es6 classes

  1. mixins are added to the prototype chain
  2. mixins are applied without modifying existing objects
  3. mixins do no magic, and dont define new semantics on top of the core language
  4. superfoo property access works within mixins and subclasses
  5. super() calls work in constructors
  6. mixins are able to extend other mixins
  7. instanceof works
  8. mixins donot require library support and can be writtin in a universal style
  9. subclasses correctly override mixin methods which override superclass methods.

- definition

  ```simple
    // simple mixin definition
    let MyMixin = (superclass) => class extends superclass {
      foo() {
        console.log('foo from MyMixin');
      }
    };

    // advanced mixin inheritance definition
    let Mixin2 = (superclass) => class extends Mixin1(superclass) {
      /* Add or override methods here */
    }

    // function composition mixin inheritance
    let CompoundMixin = (superclass) => Mixin2(Mixin3(superclass));

    // single subclass definition
    class MyClass extends MyMixin(MyBaseClass) {
      /* ... */
    }

    // multiple subclass definition
    class MyClass extends Mixin1(Mixin2(MyBaseClass)) {
      /* ... */
    }

    // instantiation
    let c = new MyClass();
    c.foo(); // prints "foo from MyMixin"
  ```

### classes

- classes can be used as an expression as well as a statement
  1. as an expression it returns a new class each time its evaluated (sort of like a factory)
- the extends clause accepts arbitrary expressions that return classes or constructors

### prototypes and constructors and 'class' section

    -	helps you create formalized objects (i.e. classes)
    -	its simply a function that creates an object
    -	new = the constructor operator, creates a new instance of an object
    -	prototype object allows you to extend functions functionality after its created

```
	function ClassConstructor(n) {
		this.name = n;
	}
  var instance = new ClassConstructor('fred');
```

    ``` use prototype to attach new methods/vars to the constructor
    	ClassConstructor.prototype.blah = function(){
    		console.log('this.name', 'is my name.');
    	}

````
	- get the original prototype function
		`Object.getPrototypeOf(someFunctionHere);`
	```create a class that uses another classes methods (this example uses arrays)
			var Queue = function() {
			  this._array = [];
			};
			Queue.prototype.enqueue = function(item) {
			  this._array.push(item);
			};
			Queue.prototype.dequeue = function() {
			  return this._array.shift();
			};
			Queue.prototype.size = function() {
			  return this._array.length; // the size of the queue
			};
````

- delegate prototypes

  ```define the prototype
    let animal = {
      animalType: 'animal',

      describe () {
        return `An ${this.animalType}, with ${this.furColor} fur,
          ${this.legs} legs, and a ${this.tail} tail.`;
      }
    };
    // create an instance
    let mouse = Object.assign(Object.create(animal), {
      animalType: 'mouse',
      furColor: 'brown',
      legs: 4,
      tail: 'long, skinny'
    });
  ```

## [jsdocs](http://www.2ality.com/2011/08/jsdoc-intro.html)

- takes code with `/** */ `comments and produces HTML documentation 'for' it
- meta data 'for' the entire file

  ```
  /**
    * @fileOverview HTML widget for displaying documentation about a reusable react component.
    * @author <a href="mailto:noah.hall@dictionary.com">Noah Hall</a>
    * @version 0.3.0
    */
  ```

  - giving an example of use

  ```
  /**
  	* @example
    * var str = "abc";
    * console.log(repeat(str, 3)); // abcabcabc
    */
  ```

  - @see: points to a related resource.

  ```
  	/**
  	  * @see MyClass#myInstanceMethod
  	  * @see The <a href="http://example.com">Example Project</a>.
  	  */
  ```

  - {@link ...}: works like @see, but can be used inside other tags.
  - @requires resourceDescription: a resource that the documented entity needs. The resource description is either a name path or a natural language description.
  - documenting functions and methods: For functions and methods. describes the parameter whose name is paramName. Type and description are optional.

  ```
  	@param {paramType} paramName description:
  		@param str
      @param str The string to repeat.
      @param {string} str
      @param {string} str The string to repeat.
  ```

  - specify a param is optional and not require
    `@param {number} [times] The number of times is optional`
    - specify a param is optional and display its default value
      `@param {number} [times=1] The number of times is optional.`
    - specify the return of a function
      `@returns {returnType} describes the return value of the function or method. Either type or description can be omitted.`
    - specify if this function throws any errors
      `@throws {exceptionType} description: describes an exception that might be thrown during the execution of the function or method. Either type or description can be omitted.`

# JAVASCRIPT

# ES5:

## [prototypical inheritance](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain)

- prototype: each object has an internal link to another object, its prototype, that provides additional behavior and properties
- prototype chain: the sequence of linked objects from one object's prototype to another, all the way up until you reach the Null object (which does not have a prototype)

### basics

- operators
  ```
  	+	Addition	x = y + 2	y = 5	x = 7	Try it »
  	-	Subtraction	x = y - 2	y = 5	x = 3	Try it »
  	*	Multiplication	x = y * 2	y = 5	x = 10	Try it »
  	/	Division	x = y / 2	y = 5	x = 2.5	Try it »
  	%	Modulus (division remainder)	x = y % 2	y = 5	x = 1	Try it »
  	++	Increment	x = ++y	y = 6	x = 6	Try it »
  	x = y++	y = 6	x = 5	Try it »
  	--	Decrement	x = --y	y = 4	x = 4	Try it »
  	x = y--	y = 4	x = 5
  ```
- statements

  - `break` Exits a 'switch' or a loop
  - `continue` Breaks one iteration (in the loop) if a specified condition occurs, and continues with the next iteration in the loop
  - `debugger` Stops the execution of JavaScript, and calls (if available) the debugging function
  - `do ... while` Executes a block of statements and repeats the block while a condition is true
  - `for` Marks a block of statements to be executed as long as a condition is true
  - `for ... in` Marks a block of statements to be executed for each element of an object (or array)
  - `function` Declares a function
  - `if ... else ... else if` Marks a block of statements to be executed depending on a condition
  - `return` Stops the execution of a function and returns a value from that function
  - `switch` Marks a block of statements to be executed depending on different cases
  - `throw` Throws (generates) an error
    - `throw "This is my error message"`
  - `try ... catch ... finally` Marks the block of statements to be executed when an error occurs in a try block, and implements error handling
  - `var` Declares a variable
  - `while` Marks a block of stat
  - `object instanceof constructor `//tests whether an object has in its prototype chain the prototype property of a constructor.
    `constructos === String, Number, Object, Date etc.`
  - `debugger` pauses app run time at this point in the app.
    1. you can open up console and type in any of the variables in the app, and it will print to the console
    2. you can type in a function name and review it
    3. you can click through the sources panel and view different things

- scope
  - determines the life and death of a variable
  - block scope: lives within {}
  - function scope: lives within function definitions/expressions/closures
  - scope chain:
    1. if the variable is not available in the current scope:
    2. look for it in the parent function, if its not available there
    3. go up one level, and continue all the way to the window (global) scope
- data conversion
  - `String(x)` returns a string from a number variable x
  - `toExponential()` Returns a string, with a number rounded and written using exponential notation.
  - `toFixed()` Returns a string, with a number rounded and written with a specified number of decimals.
  - `toPrecision()` Returns a string, with a number written with a specified length
  - `Number("3.14") ` returns 3.14
  - `parseFloat()` Parses a string and returns a floating point number
  - `parseInt()` Parses a string and returns an integer

### quick reference

#### DOM

- timers
  ```
  	setTimeout(someFunctionName, milliseconds); //runs someFunctionName ONCE after X milliseconds
  	setInterval(someFunctionName, milliseconds); //runs someFunctionName EVERY X milliseconds
  	clearInterval(intervalHandle) //you must assign setInterval to a variable
  	clearTimeout(timeoutHandle) //you must assign setTimeout to a variable
  ```
- setting CSS
  ```
  	someelement.style.property = value
  		any property wtih hyphens (e.g. background-color) becomes camel case (e.g. backgroundColor)
  		to access the elements class, you have to use somelement.style.className
  ```

#### Number

```
  Number()	Returns a number, converted from its argument.
  parseFloat()	Parses its argument and returns a floating point number without trailing zeros
    parseFloat((rad / 0.0174533).toFixed(2))
  parseInt()	Parses its argument and returns an integer
  toString()	Returns a number as a string
  toExponential()	Returns a string, with a number rounded and written using exponential notation.
  toFixed()	Returns a string, with a number rounded and written with a specified number of decimals.
  toPrecision()	Returns a string, with a number written with a specified length
  valueOf()	Returns a number as a number
```

#### Date

- creation
  ```
    var today = new Date(); //current date and time
  	var y2k = new Date(2000,0,1); //month is 0 based, everything else is normal
  	var d = new Date("October 13, 2014 11:13:00");
  	d = new Date("2015-03-25T12:00:00"); //The T in the date string, between the date and time, indicates UTC time.
  	var d = new Date();
  	var d = new Date(milliseconds);
  	var d = new Date(dateString);
  	var d = new Date(year, month, day, hours, minutes, seconds, milliseconds);
  ```
- ADT
  ```
    d = new Date(); //todays date & time
    getDate()	Get the day as a number (1-31)
    getDay()	Get the weekday a number (0-6)
    getFullYear()	Get the four digit year (yyyy)
    getHours()	Get the hour (0-23)
    getMilliseconds()	Get the milliseconds (0-999)
    getMinutes()	Get the minutes (0-59)
    getMonth()	Get the month (0-11)
    getSeconds()	Get the seconds (0-59)
    getTime()	Get the time (milliseconds since January 1, 1970)
  ```

#### String

```
  charAt()	Returns the character at the specified index (position)
  charCodeAt()	Returns the Unicode of the character at the specified index
  concat()	Joins two or more strings, and returns a new joined strings
  fromCharCode()	Converts Unicode values to characters
    seems to work, jsut like this
      String.fromCharcode(yourStringVarHere);
  indexOf()	Returns the position of the first found occurrence of a specified value in a string
    blah.indexOf('blah2') !== -1 // in the event blah2 is at the 0 index
  lastIndexOf()	Returns the position of the last found occurrence of a specified value in a string
  localeCompare()	Compares two strings in the current locale
  match()	Searches a string for a match against a regular expression, and returns the matches
  replace(regexp|substr, newSubStr|function[, flags]) returns a new string (best to use a RegExp object so you can use flags)
  search()	Searches a string for a specified value, or regular expression, and returns the position of the match
  slice()	Extracts a part of a string and returns a new string
  split()	Splits a string into an array of substrings
  substr()	Extracts the characters from a string, beginning at a specified start position, and through the specified number of character
  substring()	Extracts the characters from a string, between two specified indices
  toLocaleLowerCase()	Converts a string to lowercase letters, according to the host's locale
  toLocaleUpperCase()	Converts a string to uppercase letters, according to the host's locale
  toLowerCase()	Converts a string to lowercase letters
  toString()	Returns the value of a String object
  toUpperCase()	Converts a string to uppercase letters
  trim()	Removes whitespace from both ends of a string
  valueOf()	Returns the primitive value of a String object
```

- code examples
  1. reverse a string
     `s.split('').reverse().join('');`
  2. remove last char of string
     `str = str.substring(0, str.length - 1);`

#### [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/)

- creation
  ```
  	var blah = [];
  	var blah = [1,2,3];
  	var blah = new Array();
  	var blah = Array();
  	var blah = Array(5);
  	var cars = new Array("Saab", "Volvo", "BMW");
  	var name = cars[0];
  	cars[0] = "Opel";
  ```
  - ADT
  ```
    blah.length //how many items
  	concat()	Joins two or more arrays, and returns a copy of the joined arrays
  	indexOf()	Search the array for an element and returns its position
  	join()	Joins all elements of an array into a string
  	lastIndexOf()	Search the array for an element, starting at the end, and returns its position
  	pop()	Removes the last element of an array, and returns that element
  	push()	Adds new elements to the end of an array, and returns the new length
  	reverse()	Reverses the order of the elements in an array
  	shift()	Removes the first element of an array, and returns that element
  	slice()	Selects a part of an array, and returns the new array
  	sort([compareFunction])	Sorts the elements of an array
  	splice(start, deleteCount[, item1[, item2[, ...]]])	Adds/Removes elements from an array, item1,itemX will be added
  		If you specify a different number of elements to insert than the number youre removing, the array will have a different length at the end of the call.
  	toString()	Converts an array to a string, and returns the result
  	unshift()	Adds new elements to the beginning of an array, and returns the new length
  	valueOf()	Returns the primitive value of an array
  	map(callback) apply the function to each item in the array
  	filter(callback[, thisArg]) The filter() method creates a new array with all elements that pass the test implemented by the provided function.
  	some(functionName) The some() method tests whether some element in the array passes the test implemented by the provided function. if any element returns true, it returns true
  	reduce(callback[, initialValue]) method applies a function against an accumulator and each value of the array (from left-to-right) to reduce it to a single value.
  	every(callback[, thisArg]) tests whether all elements in the array pass the test implemented by the provided function.
  ```

#### [Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

- creation
  ```
  	var blah = {'this':'that','this':'that'}
  	var blah {
  		'myFunction':function() {return this.firstName + " " + this.lastName;},
  		'otherObject' : {
  			'item1': 'sometext'
  		}
  	}
  ```
- associate functions with objects

  ```
  	function someFunction(){
  		console.log(this);
  	};

  	var blah = {};
  	blah.someMethod() = someFunction;
  		this associtiates the method on the object, with a predefined function
  		make sure the function uses the keyword 'this' so it can be used with
  		multiple objects
  ```

  - access object properties

  ```
  	objectName.propertyName
  	objectName["propertyName"]
  	objectName.methodName()
  ```

  - ADT

  ```
  	Object.assign() Creates a new object by copying the values of all enumerable own properties from one or more source objects to a target object.
  	Object.create() Creates a new object with the specified prototype object and properties.
  	Object.defineProperty() Adds the named property described by a given descriptor to an object.
  	Object.defineProperties() Adds the named properties described by the given descriptors to an object.
  	Object.entries()  Returns an array of a given objects own enumerable property [key, value] pairs.
  	Object.freeze() Freezes an object: other code cant delete or change any properties.
  	Object.getOwnPropertyDescriptor() Returns a property descriptor for a named property on an object.
  	Object.getOwnPropertyNames() Returns an array containing the names of all of the given objects own enumerable and non-enumerable properties.
  	Object.getOwnPropertySymbols() Returns an array of all symbol properties found directly upon a given object.
  	Object.getPrototypeOf() Returns the prototype of the specified object.
  	Object.is() Compares if two values are distinguishable (ie. the same)
  	Object.isExtensible() Determines if extending of an object is allowed.
  	Object.isFrozen() Determines if an object was frozen.
  	Object.isSealed() Determines if an object is sealed.
  	Object.keys() Returns an array containing the names of all of the given objects own enumerable properties.
  	Object.observe()  Asynchronously observes changes to an object.
  	Object.getNotifier()  Get a notifier with which to create object changes manually.
  	Object.preventExtensions() Prevents any extensions of an object.
  	Object.seal() Prevents other code from deleting properties of an object.
  	Object.setPrototypeOf() Sets the prototype (i.e., the internal [[Prototype]] property)
  	Object.unobserve()  Unobserves changes to an object.
  	Object.values()  Returns an array of a given objects own enumerable values.
  ```

#### control

    - try catch
    ```

try {
/_code_/
} catch (err){
/_
err.message == message of error
_/
}finally {
/_do this regardless of what happens_/
}
`	- if statements
   `
if (condition1) {
block of code to be executed if condition1 is true
} else if (condition2) {
block of code to be executed if the condition1 is false and condition2 is true
} else {
block of code to be executed if the condition1 is false and condition2 is false
}
`	- switch statements
   `
switch(expression) {
case n:
code block
break;
case n:
code block
break;
default:
default code block
}

````

#### loops

    - The break statement breaks the loop and continues executing the code after the loop (if any):
    - The continue statement breaks one iteration (in the loop), if a specified condition occurs, and continues with the next iteration in the loop.
    - for
    ```

var fruits = ["Banana", "Orange", "Apple", "Mango"];
for (index = 0; index < fruits.length; index++) {
text += fruits[index];
}
`	- for in
   `
var person = {fname:"John", lname:"Doe", age:25};
var text = "";
var x;
for (x in person) {
text += person[x];
}
`	- while
   `
index =100
while (index--) {
//index in here will start at 99, since you used index-- as the condition
code block to be executed
}
`	- do while
   `
do {
code block to be executed
}
while (condition);
````

#### functions

    - function parameters are variables that are local to the function
    - functions can return anything, even other functions
    - arguments = an array-like OBJECT containing all of the parameters passed to the function. it is NOT AN Array
    ```
    		function blah(){
    			//arguments[0], arguments[1], etc contains all the args passed in
    			// you dont need to have a parameter declared,
    		}
    		convert it to an array:
    			var args = (arguments.length === 1?[arguments[0]]:Array.apply(null, arguments));
    		call an arrays method on arguments object
    			Array.every.call(arguments, function(value){ return this stuff;})
    ```
    - function declaration
    ```

function myFunction(){
/_do this stuff_/
}
`	- definition expressions (i.e. anonymous function)
   `
var myFunction = function(a,b) {
//do some stuff
}
can be executed immediately
var myFunction = function(a,b){
return a+b;
}(2,2);
`	- save data in a function after every call
   `
function saveThis(data) {
this.save = this.save || []; //create a new array only on the first call
if (this.save[data]) return this.save[data]; //return the data if it exists
return this.save[data] = data; //save new data on each call
}
`	- anonymous enclosures
   `
(function(arg1,arg2){
//wrap the anonymous function in paranthesis
//then call the function immediately by ending wtih () and send in parameters
//any variables declared inside this function are local to this function

})(par1, par2);
`	- using call and apply to control 'this' and 'arguments' inside a function
   `
functionName.call(someOBject, someParameter)
someObject becomes the value of 'this' inside of the function
someParameter becomes the parameter passed to the function

functionNAme.apply(someObject, ['someArrayElement'])
same as the above, only the function parameter is passed as an array

```
	- functions fired on events
		`<button type="button" onclick="myFunction()">Try it</button>` - function closures: defining a function within a function

#### Math

- ADT
```

    Math.random();       // returns a random number
    Math.pow(base, exponent)
    Math.min(0, 150, 30, 20, -8, -200);
    Math.max(0, 150, 30, 20, -8, -200);
    Math.round(4.7);            // returns 5
    Math.round(4.4);            // returns 4
    Math.ceil(4.4);             // returns 5
    Math.floor(4.7);            // returns 4
    Math.E          // returns Euler's number
    Math.PI         // returns PI
    Math.SQRT2      // returns the square root of 2
    Math.SQRT1_2    // returns the square root of 1/2
    Math.LN2        // returns the natural logarithm of 2
    Math.LN10       // returns the natural logarithm of 10
    Math.log2(x)      // returns base 2 logarithm of E
    Math.log10(x)    // returns base 10 logarithm of E
    abs(x)	Returns the absolute value of x
    acos(x)	Returns the arccosine of x, in radians
    asin(x)	Returns the arcsine of x, in radians
    atan(x)	Returns the arctangent of x as a numeric value between -PI/2 and PI/2 radians
    atan2(y,x)	Returns the arctangent of the quotient of its arguments
    ceil(x)	Returns x, rounded upwards to the nearest integer
    cos(x)	Returns the cosine of x (x is in radians)
    exp(x)	Returns the value of Ex
    floor(x)	Returns x, rounded downwards to the nearest integer
    log(x)	Returns the natural logarithm (base E) of x
    max(x,y,z,...,n)	Returns the number with the highest value
    min(x,y,z,...,n)	Returns the number with the lowest value
    pow(x,y)	Returns the value of x to the power of y
    random()	Returns a random number between 0 and 1
    round(x)	Rounds x to the nearest integer
    sin(x)	Returns the sine of x (x is in radians)
    sqrt(x)	Returns the square root of x
    tan(x)	Returns the tangent of an angle

```

#### [RegExp](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)

  - `/pattern/modifiers;`

- regexp tester: https://regex101.com/
- creation
```

var patt = /w3schools/i
var patt = new RegExp('w3schools', 'i');
var matches = textVar.match(/[8wtyuioahxvm]/gi); //returns an array of matches
/w3schools/i is a regular expression.
w3schools is a pattern (to be used in a search).
i is a modifier (modifies the search to be case-insensitive).

```
- modifiers
```

i Perform case-insensitive matching
g Perform a global match (find all matches rather than stopping after the first match)
m Perform multiline matching

```
- quantifiers
```

    n+	Matches any string that contains at least one n
    n*	Matches any string that contains zero or more occurrences of n
    n?	Matches any string that contains zero or one occurrences of n
    n{X}	Matches any string that contains a sequence of X ns
    n{X,Y}	Matches any string that contains a sequence of X to Y ns
    n{X,}	Matches any string that contains a sequence of at least X ns
    n$	Matches any string with n at the end of it
    ^n	Matches any string with n at the beginning of it
    ?=n	Matches any string that is followed by a specific string n
    ?!n	Matches any string that is not followed by a specific string n

```
- expressions: Brackets are used to find a range of characters:
```

[abc] Find any character between the brackets
[^abc] Find any character NOT between the brackets
[0-9] Find any digit between the brackets
[^0-9] Find any digit NOT between the brackets
(x|y) Find any of the alternatives specified
(?:YourRegexHere) non capturing group
will match YourRegexHere but wont return it as a match
i.e. it must PASS the test, but dont include it in the returned results

```
- groups
```

    (x) Matches x and remembers the match. These are called capturing groups.
    (?:x) Matches x but does not remember the match. These are called non-capturing groups.

```
- assertions
```

    x(?=y) Matches x only if x is followed by y.
    x(?!y) Matches x only if x is not followed by y.

```
- meta-characters: characters withs special meanings
```

. Find a single character, except newline or line terminator
\w Find a word character
\W Find a non-word character
\d Find a digit
\D Find a non-digit character
\s Find a whitespace character
\S Find a non-whitespace character
\b Find a match at the beginning/end of a word \bword\b
Before the first character in the string, if the first character is a word character.
After the last character in the string, if the last character is a word character.
Between two characters in the string, where one is a word
\B Find a match not at the beginning/end of a word
opposte of \b
\0 Find a NUL character
\n Find a new line character
\f Find a form feed character
\r Find a carriage return character
\t Find a tab character
\v Find a vertical tab character
\b match a word boundary \bword\b.
character and the other is not a word character.
\xxx Find the character specified by an octal number xxx
\xdd Find the character specified by a hexadecimal number dd
\uxxxx Find the Unicode character specified by a hexadecimal number xxxx

````
- Methods that use regular expressions
  ```
  exec	A RegExp method that executes a search for a match in a string. It returns an array of information.
  test	A RegExp method that tests for a match in a string. It returns true or false.
  match	A String method that executes a search for a match in a string. It returns an array of information or null on a mismatch.
  search	A String method that tests for a match in a string. It returns the index of the match, or -1 if the search fails.
  replace	A String method that executes a search for a match in a string, and replaces the matched substring with a replacement substring.
  split	A String method that uses a regular expression or a fixed string to break a string into an array of substrings.
  myRegex = /blah/i;
  myRegex.test(myString);
  ```
````

```

# [ES6](https://github.com/lukehoban/es6features)

## Strings

```

"abcde".includes("cd") // true
"abc".repeat(3) // "abcabcabc"
`${some var or function call} some string`

```

## numbers

```

Number.EPSILON
Number.isInteger(Infinity) // false
Number.isNaN("NaN") // false

```

## Math

```

Math.acosh(3) // 1.762747174039086
Math.hypot(3, 4) // 5
Math.imul(Math.pow(2, 32) - 1, Math.pow(2, 32) - 2) // 2

```

## Arrays:

```

Array.from(document.querySelectorAll('\*')) // Returns a real Array
Array.of(1, 2, 3) // Similar to new Array(...), but without special one-arg behavior
[0, 0, 0].fill(7, 1) // [0,7,7]
[1, 2, 3].find(x => x == 3) // 3
[1, 2, 3].findIndex(x => x == 2) // 1
[1, 2, 3, 4, 5].copyWithin(3, 0) // [1, 2, 3, 1, 2]
["a", "b", "c"].entries() // iterator [0, "a"], [1,"b"], [2,"c"]
["a", "b", "c"].keys() // iterator 0, 1, 2
["a", "b", "c"].values() // iterator "a", "b", "c"

````

## Objects

    Object Literals:
      {
        // __proto__
        __proto__: theProtoObj,
        blah,
        function() {...},
        ['one' + id]: 'computed property'
      }

## Operators

- Spread Operator: expands an array/object into elements, i.e. flatten arrays and objects in function calls, array literals, destructuring assignment
  `myFunction(...iterableObj);`
  `[...iterableObj, 4, 5, 6]`
- Destructuring: pull values out of arrays/objects and assign them to variables
  - arrays
    ```
      [a, b, ...rest] = [1, 2, 3, 4, 5];
      console.log(a); // 1
      console.log(b); // 2
      console.log(rest); // [3, 4, 5]
    ```
  - objects
    ```
      ({a, b} = {a:1, b:2});
      console.log(a); // 1
      console.log(b); // 2
    ```
  - assign new var names:
    ```
      var o = {p: 42, q: true};
      var {p: foo, q: bar} = o;
      console.log(foo); // 42
      console.log(bar); // true
    ```
  - Fail-soft destructuring
    ```
      var [a] = [];
      a === undefined;
    ```

## Functions:

- Default Arguments
  `function drawES6Chart({size = 'big', cords = { x: 0, y: 0 }, radius = 25} = {}) {..}`
- Rest Parameters/: used in function arguments to capture a list of variables from arrays
````

    function(a, b, ...theArgs) {
      // ...
    }

````

### Arrow functions:

## metaprogramming:

### Symbols:

- reflection within implementation - you sprinkle them on your existing classes and objects to change the behaviour.
- use cases:
- not iterable over
- not fetched using the already existing Reflection tools
- guaranteed not to conflict with other properties in the object!
- If you create a symbol (var mysym = Symbol()) it creates a completely new value inside the JavaScript engine.
  - If you don’t have the reference for the Symbol, you just can’t use it.
  - This also means two symbols will never equal the same value, even if they have the same description.
- Symbol.for(). This method creates a Symbol in a “global Symbol registry”. Small aside: this registry is also cross-realm, meaning a Symbol from an iframe or service worker will be the same as one generated from your existing frame:
- code:

- create a symbol:
  `const blah = Symbol();`
  `const blah1 = Symbol('with a description for console logging')`
- symbols as object properties

  ```
    const blah = Symbol('used as object key');
    const object = {};
    object[blah] = 'Something else';
    **note**
      object.blah === 'undefined' // doesnt work
      object[blah] === 'Something else'; // only work sif you have reference to the symbol

  ```

- see an object's symbols: `Object.getOwnPropertySymbols:`

### Reflect

- all about Reflection through introspection - used to discover very low level information about your code.

### Proxy:

- Reflection through intercession - wrapping objects and intercepting their behaviours through traps.

## Classes:

  - function declarations are hoisted, classes are not
  - creating
    ```
      class Polygon {
        constructor({...options}) {
          this.height = height;
          this.width = width;
        }
        get area() {
          return this.calcArea();
        }
        set matrixType(matrixType) {
          this.idMatrix = matrixType;
        }
        static distance(a, b) {
          //not callable from instances
          const dx = a.x - b.x;
          const dy = a.y - b.y;

          return Math.sqrt(dx*dx + dy*dy);
        }
      }
    ```
  - extending
    ```
      class OtherShape extends Polygon {
        constructor({...options}) {
          super(options); //parent.constructor()
          this.blah = blah;
        }
        area2() {
          // call parent method
          super.area();
        }
      }
    ```

### Generators examples

- send and receive data

````

    function* someName() {
      yield 'someValue'; //send data without accepting a return value
      const getIt = yield; //receive data without sending a value
      const getIt = yield 'someOtherValue'; // send and receive data

      return 'someFinalValue'; // exit permanently
    }
    const blah = someName(); // always call the function immediately to get everything up to the first yield
    blah.next(optionalParam) // enter and continue the function

```

- use with 'for' of loops
```

    function* colors() {
      yield 'red'; yield 'blue';
    }
    for (let color of colors()) {
      console.log(color)
    }

```

## Iterators:

### Iterators examples

- create fibonacci sequence
```

    let fibonacci = {
      [Symbol.iterator]() {
        let pre = 0, cur = 1;
        return {
          next() {
            [pre, cur] = [cur, pre + cur];
            return { done: false, value: cur }
          }
        }
      }
    }
    for (var n of fibonacci) {
      if (n > 1000) break;
      console.log(n);
    }

```
- combine generators with iterators:

```

    var fibonacci = {
      [Symbol.iterator]: function*() {
        var pre = 0, cur = 1;
        for (;;) {
          var temp = pre;
          pre = cur;
          cur += temp;
          yield cur;
        }
      }
    }

    for (var n of fibonacci) {
      // truncate the sequence at 1000
      if (n > 1000)
        break;
      console.log(n);
    }

```

## Loops:

```

'for..of': iterating arrays
for (let color of colors) {
// color = each item in the array
}

```

## Map, weakmap

### Maps

    var m = new Map();
    m.set("hello", 42);
    m.set(s, 34);
    m.get(s) == 34;
    // Weak Maps
    //  WeakMaps provides leak-free object-key’d side tables.
    var wm = new WeakMap();
    wm.set(s, { extra: 42 });
    wm.size === undefined

## Set, weakset

    // Sets
    var s = new Set();
    s.add("hello").add("goodbye").add("hello");
    s.size === 2;
    s.has("hello") === true;
    // Weak Sets
    var ws = new WeakSet();
    ws.add({ data: 42 });
      // Because the added object has no other references, it will not be held in the set

proxies: Proxies enable creation of objects with the full range of behaviors available to host objects. Can be used 'for' interception, object virtualization, logging/profiling, etc.

reflect
tail
module loaders:
// Dynamic loading – ‘System’ is default loader
System.import('lib/math').then(function(m) {
alert("2π = " + m.sum(m.pi, m.pi));
});
// Create execution sandboxes – new Loaders
var loader = new Loader({
global: fixup(window) // replace ‘console.log’
});
loader.eval("console.log('hello world!');");
// Directly manipulate module cache
System.get('jquery');
System.set('jquery', Module({$: $})); // WARNING: not yet finalized

## keywords

### let: defines block scoped variables

```

var x = 10 (global)
if (x){
var x = 5 //overrides the global x, and sets it to 5
//this is because the if block does not define a new scope
}
if (x){
let x = 2 //this x is only available within this if statement
}

```

- where to use
```

    for (let i = 0; i<blah;i++){
      i is no longer overridden on each loop
    }

````

### const: set constant vars that should not be reasigned

- example: `const name = "noah";`

# ES7: (ES2016)

## async await

- @see #topics Async Promises section above

## destructuring:

`({a, b, ...rest} = {a:1, b:2, c:3, d:4});`

## Generators: a function that can be exited, and entered multiple times

- yield: exit the function and send a value to the caller, and optionally receive a value back
- function.next(): retrieve and send data, executes up to and including the next yield statement
- for each yield statement you need to call blah.next()
- returns `{value: 'dataInAndOut', done: true|false}`
  1. value: data sent out from yield, or data sent in through next(someData);
  2. done:
  - false if function is not done, and can be entered again
  - true: if function is done, and should not be re-entered
- you can access the value directly: `bloop.next().value;``
- use cases
- asynchornous events
- timers (e.g. setInterval)

# APIs

## WINDOW: the lord of the ring

## DOM

  - nodes: represent elements, comments, text, comments, etc. there are 12 node types, most important are element, attribute, and text
  - checking node types
  ```

someVar.nodeType
1 = element
2 = attribute
3 = text
`	- grabbing elements
 `
var myelement = document.GetElementById('idname');
getElementById can be used at any level, not just the document level
e.g. if you grab a UL, you can use getElementsByTagName to grab its child li tags
var myelement = document.getElementsByTagName('p'); //returns an array containing 0/more elements
`	- working with attributes
 `
myelemen.getAttribute('attributename');
myelement.setAttribute('attributename', 'attributevalue');
``	- change html content
		`document.getElementById("demo").innerHTML = "Hello JavaScript";`
	- change html styles (CSS)
		`document.getElementById("demo").style.fontSize = "25px";`
	- creating element and inserting elements into the DOM
 ``
var newElement = document.createElement('li');
var newText = document.createTextNode('add this text');
newElement.appendChild(newText);
otherElement.appendChild(newElement);
`	- good tricks
 `
window.onload = function() {
do stuff once the entire page has loaded

}
`	- display data to the user
 `
alert('your message') //give user information
prompt('your question') //ask user for information
document.write('your html') //rewrite the entire page
element.innerHTML = 'Your Text' //add text to an element
console.log('your message') //writes tot he console during program execution
````

### [window.fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API):

- simplified XMLhttpRequest

### Fetch examples

- fetch with a request object
  `fetch(requestObject).then(...)`

- Simple response handling

```
  fetch('https://davidwalsh.name/some/url')
    .then(function(response) {

    }).catch(function(err) {
    	// Error :(
    });
```

- url (required), options (optional)

```
  fetch('https://davidwalsh.name/some/url', {
  	method: 'get'
  }).then(function(response) {

  }).catch(function(err) {
  	// Error :(
  });
```

- Chaining for more "advanced" handling

```
  fetch('https://davidwalsh.name/some/url')
  .then(function(response) {
  	return //...
  }).then(function(returnedValue) {
  	// ...
  }).catch(function(err) {
  	// Error :(
  });
```

- The fetch signature, however, acts like Request so you could also do:

```
  fetch('https://davidwalsh.name/users.json', {
  	method: 'POST',
  	mode: 'cors',
  	redirect: 'follow',
  	headers: new Headers({
  		'Content-Type': 'text/plain'
  	})
  }).then(function() { /* handle response */ });
```

### [window.Request](https://developer.mozilla.org/en-US/docs/Web/API/Request)

- A Request instance represents the request piece of a fetch call.
  - important properties
    1. method - GET, POST, PUT, DELETE, HEAD
    2. url - URL of the request
    3. headers - associated Headers object
    4. referrer - referrer of the request
    5. mode - cors, no-cors, same-origin
    6. credentials - should cookies go with the request? omit, same-origin
    7. redirect - follow, error, manual
    8. integrity - subresource integrity value
    9. cache - cache mode (default, reload, no-cache)

### Request examples

**sample request and fetch**
`     var request = new Request('https://davidwalsh.name/users.json', {
        method: 'POST',
        mode: 'cors',
        redirect: 'follow',
        headers: new Headers({
          'Content-Type': 'text/plain'
        })
      });
      // Now use it!
      fetch(request).then(function() { /* handle response */ });
  `

### [window.Response](https://developer.mozilla.org/en-US/docs/Web/API/Response):

- properties
  1. type - basic, cors
  2. url
  3. useFinalURL - Boolean for if url is the final URL
  4. status - status code (ex: 200, 404, etc.)
  5. ok - Boolean for successful response (status in the range 200-299)
  6. statusText - status code (ex: OK)
  7. headers - Headers object associated with the response.
- methods
  1. clone() - Creates a clone of a Response object. VERY USFUL! as you can only read a response body once, so clone it to read it multipel tiems (e.g. to send to multiple places)
  2. error() - Returns a new Response object associated with a network error.
  3. redirect() - Creates a new response with a different URL.
  4. arrayBuffer() - Returns a promise that resolves with an ArrayBuffer.
  5. blob() - Returns a promise that resolves with a Blob.
  6. formData() - Returns a promise that resolves with a FormData object.
  7. json() - Returns a promise that resolves with a JSON object.
  8. text() - Returns a promise that resolves with a USVString (text).

### response examples

- json example
  ```
    fetch('https://davidwalsh.name/demo/arsenal.json').then(function(response) {
    	// Convert to JSON
    	return response.json();
    }).then(function(j) {
    	// Yay, `j` is a JSON object
    	console.log(j);
    });
  ```

### [window.Headers](https://developer.mozilla.org/en-US/docs/Web/API/Headers)

- Allows you to perform various actions on HTTP request and response headers. These actions include retrieving, setting, adding to, and removing.

### headers examples

- Create an empty Headers instance
  ```
    var headers = new Headers();
    // Add a few headers
    headers.append('Content-Type', 'text/plain');
    headers.append('X-My-Custom-Header', 'CustomValue');
    // Check, get, and set header values
    headers.has('Content-Type'); // true
    headers.get('Content-Type'); // "text/plain"
    headers.set('Content-Type', 'application/json');
    // Delete a header
    headers.delete('X-My-Custom-Header');
    // Add initial values
    var headers = new Headers({
      'Content-Type': 'text/plain',
      'X-My-Custom-Header': 'CustomValue'
    });
  ```

### [window.localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Storage/LocalStorage)

- localStorage is the same as sessionStorage with the same same-origin rules applied but it is persistent.

### localStorage examples

```
  localStorage.setItem('thisVar','toThisString')
  localStorage.getItem('thisVar')
  localStorage.removeItem('thisVar')
  localStorage.clear();
```

### [window.indexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API)

- IndexedDB is a low-level API for client-side storage of significant amounts of structured data, including files/blobs. This API uses indexes to enable high performance searches of this data.
- background:
  - positives:
    - every major browser supports indexeddb
  - negatives:
    - is async but predates promsies, so its eventbased system is horrid.
      1. use [IndexedDB Promised library instead](https://github.com/jakearchibald/idb)
- location: resources > indexedDB

- structure:

  - db: can be multiple per website
    - object store: each db can have multiple object stores (i.e. tables) to store data
      - object stores can only be created via the upgrade funcion when creating the DB
        - you have to bump up the version to modify the object store (e.g. add object stores / create indexes)
        - upgrade version only gets called with the upgradeDb() function
      - values: any data type, each item can have a primary key/one of its values can be set as the primary key
      - transactions: (i.e. CRUD), all CRUD operations must be part of a transaction
        1. if a transaction fails for a series of steps/actions, none of the steps/actions are applied and the whole transaction is reverted
        2. create a transaction object > use it to return an objectStore > operate CRUD on object store
      - indexes: you can create multiple indexes per object store, which orders (i.e. sorts) the values by a specific property making it faster to look up

- API
  - indexedDb: found on window object
    1. .deleteDatabase('dbName')
  - IDBObjectStore: interface for an object store
    - methods: add, clear, delete, get, getAll, getAllKeys, etc.
    - properties: indexNames, keyPath, name, transaction, autoIncrement

### [idb promised](https://github.com/jakearchibald/idb)

- idb: IndexedDB Promised; a library built to convert IndexedDB to promises
- background: whenever IndexeDB would return a request, IDB returns a promise

#### idb promised examples

- open DB: always use in switch statement
  ```
    const someDb = idb.open('someDbName',3, (upgradeDb){
      switch(upgradeDb.oldVersion) {
        case 0:
          // original create db
          someTable = upgradeDb.createObjectStore('someName1');
          // all db 0 version logic here
        case 1:
          //add new object store with key id
          someOtherTable = upgradeDb.createObjectStore('someName2', { keyPath: 'id' })
          // all db version 2 logic here
        case 2:
          //modify someTable and add new index
          var someTable = upgradeDb.transaction.objectStore('someName1');
        someTable.createIndex('animal', 'favriteAnimal'); // index name = animal, sorts on key favoriteAnimal
      }
    })
  ```
- create db and create record
  ```
    const dbName = idb.open('newDbName', 1, (upgradeDb) => {
      const keyValStore = upgradeDb.createObjectStore('keyval');
      keyValStore.put('value', 'keyName') // create record
      // create objectStore and define index
      upgradeDb.createObjectStore('people', { keyPath: 'name' });
    })
  ```
- read from db
  ```
    dbName.then((db) => {
      const transaction = db.transaction('keyval');
      const keyValStore = transaction.objectStore('keyval');
      return keyValStore.get('keyName'); // returns promise
    }).then((value) => {
      console.log('the value from transaction is', value);
    })
  ```
- read and write to db
  ```
    dbName.then((db) => {
      const transaction = db.transaction('keyval', 'readwrite');
      const keyValStore = transaction.objectStore('keyval');
      keyValStore.put('value', 'keyName');
      return transaction.complete; // returns promise
    }).then(() => {
      console.log('transaction completed successfully if promise resolves');
    })
  ```
- get all records

  ```
    dbName.then(function(db) {
      var tx = db.transaction('people');
      var peopleStore = tx.objectStore('people');
      return peopleStore.getAll(); // all objects in store

      //or get all people by idnex
      var ageIndex = peopleStore.index('age');
      return ageIndex.getAll(); // all objects in store

    }).then(function(people) {
      console.log('people', people)
    })
  ```

- get records one at a time

  ```
    dbName.then(function(db) {
      var tx = db.transaction('people');
      var peopleStore = tx.objectStore('people');
      var ageIndex = peopleStore.index('age');
      return ageIndex.openCursor();

      //loop through records backwords
      store.index('indexName')
        .openCursor(null, 'prev')
        .then(function(cursor){...})

    }).then(function(cursor) {
      if (!cursor)  return;
      // skip first two items
      return cursor.advance(2);
    }).then(function logPerson(cursor){
      if (!cursor) return;
      console.log('cursored at', cursor.value.keyName);
      // cursor.update(newValue)
      // cursor.delete()
      return cursor.continue().then(logPerson); // recursively call logPerson
    }).then(function() {
      console.log('done cursoring');
    })
  ```

### [window.document](https://developer.mozilla.org/en-US/docs/Web/API/document)

### document important properties

- readyState: has 3 States (values); everytime readState changes, a ready state change event fires
  1. loading: document still loading
  2. interactive: document has loaded and has been parsed, but sub resources (images, css, frames, etc) hasnt loaded
  - loaded === dom.contentLoaded event
    useful for running code after all of the initial DOM content has been loaded
  3. complete: everything has loaded

### document examples

- implement jQuery on .ready() handler:
  ```
    function ready() {
      // Credit to Jake Archibald
      // https://github.com/jakearchibald/svgomg/blob/master/src/js/page/utils.js#L7
      return new Promise(function(resolve) {
        function checkState() {
          if (document.readyState !== 'loading') {
            resolve();
          }
        }
        document.addEventListener('readystatechange', checkState);
        checkState();
      });
    };
    ready().then(run your other code);
  ```

### window.navigator

- The Navigator interface represents the state and the identity of the user agent. It allows scripts to query it and to register themselves to carry on some activities.

### [window.Worker](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API)

- Web worker: runs separately from the page, isnt visible to the user, cant access the DOM,
  .it intercepts and controls requests made by the browser

### [window.caches](https://developer.mozilla.org/en-US/docs/Web/API/cache)

- updating static cache:
  1. create new SW
  2. remove old SW
  3. when #1 is actived, deleted old cache
  4. create new cache
- see cache: dev tools > resources/application > cache storage
- cache names in prod should be auto generated and cache times set to a year a more, when the file changes, you can just upload the new file (with a different name) and that will force an update since the url to the file changes
  - be sure the cache names are versioned or auto-generated, e.g. somecache-v1 | somecache-!@#s
- opening a cache returns a response objects
  - a response object can only be used once, you will need to call response.clone() to use it more than once
- methods
  1. caches.open('createOrOpenACache').then(function(cache){...})
  - create or open a cache-box by name
  - returns a promise of request and response pairs from any secure origin
  - can store fonts, scripts, images, etc. from your origin, and any origin on the web
  2. cache.put(request, response);
  - store a request response in
  3. cache.addAll([request1, request2, 'url3', 'url4'])
  - accepts request objects / urls, makes the requests, and stores the results
  - are atomic requests, if any fail, none are added
  4. cache.match(requestObjectOrUrlString)
  - retrieve something from the cache
  - returns matching response or null
  5. caches.match(requestObjectOrUrlString)
  - same as cache.match, only searches ALL CACHES starting with the oldest first
  - retrieve response from cache for all matching requests
  6. caches.delete('cacheName|cacheObject') //always clean your cache
  7. caches.keys() //get names of all your caches

#### cache examples

- check if request is in cache
  ```
    self.addEventListener('fetch', function(event) {
      event.respondWith(
        caches.match(event.request).then(function(response) {
          console.log('res', response);
          if (response) return response;
          return fetch(event.request);
        }).catch(function(error) {
          console.log('err', error);
          return fetch(event.request);
        })
      );
    });
  ```
